/* ============================================================
   EJERCICIO P4 · DESESTABILIZADOR DE LA CAJA MENTAL
=============================================================== */

.p4-ejercicio-container {
  margin-top: 26px;
  padding: 24px;
  border-radius: 20px;
  background: linear-gradient(135deg, #ffffff, #f7fbff, #fff3d8);
  border: 1px solid rgba(253, 191, 18, 0.5);
  box-shadow: 0 16px 40px rgba(0, 0, 0, 0.06);
}

.p4-header p {
  font-size: 0.95rem;
  line-height: 1.6;
}

/* Caja mental */

.p4-caja-mental {
  width: 260px;
  height: 180px;
  margin: 20px auto;
  border: 3px solid rgba(200, 60, 60, 0.4);
  border-radius: 16px;
  background: rgba(255, 240, 240, 0.6);
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
  transition: background 0.25s ease, box-shadow 0.25s ease, transform 0.25s ease;
}

.p4-caja-mental.p4-error {
  background: rgba(255, 80, 80, 0.25);
  box-shadow: 0 0 20px rgba(255, 80, 80, 0.4);
  transform: scale(1.02);
}

/* Zonas */

.p4-zona-accion,
.p4-zona-mentalista {
  padding: 14px;
  border-radius: 14px;
  border: 2px dashed rgba(12, 58, 96, 0.3);
  text-align: center;
  margin-bottom: 14px;
}

.p4-zona-accion {
  background: rgba(46, 160, 67, 0.08);
  border-color: rgba(46, 160, 67, 0.4);
}

.p4-zona-mentalista {
  background: rgba(200, 60, 60, 0.08);
  border-color: rgba(200, 60, 60, 0.4);
}

/* Tarjetas */

.p4-tarjetas {
  margin-top: 16px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.p4-card {
  padding: 10px 12px;
  background: #ffffff;
  border-radius: 14px;
  border: 1px solid rgba(12, 58, 96, 0.18);
  cursor: grab;
  transition: transform 0.15s ease, background 0.15s ease, border-color 0.15s ease;
}

.p4-card:active {
  cursor: grabbing;
}

.p4-card.p4-correcta {
  background: #f5fff2;
  border-color: rgba(46, 160, 67, 0.8);
}

.p4-card.p4-error {
  background: #fff2f2;
  border-color: rgba(200, 60, 60, 0.8);
  animation: p4-shake 0.3s;
}

@keyframes p4-shake {
  0% { transform: translateX(0); }
  25% { transform: translateX(-4px); }
  50% { transform: translateX(4px); }
  75% { transform: translateX(-4px); }
  100% { transform: translateX(0); }
}

/* Panel A–C */

.p4-panel-funciones {
  margin-top: 20px;
  padding: 14px;
  background: #ffffffcc;
  border-radius: 14px;
  border: 1px solid rgba(12, 58, 96, 0.12);
  min-height: 40px;
  font-size: 0.9rem;
}

/* Caja rota */

.p4-caja-mental.p4-caja-rota {
  animation: p4-explotar 0.9s forwards;
}

@keyframes p4-explotar {
  0% { opacity: 1; transform: scale(1); }
  40% { opacity: 0.7; transform: scale(1.15); }
  80% { opacity: 0.3; transform: scale(0.85); }
  100% { opacity: 0; transform: scale(0); }
}

/* Resultado final */

.p4-mensaje-final {
  margin-top: 16px;
  font-size: 1rem;
  font-weight: 600;
  min-height: 28px;
}

/* Botón reset */

.p4-btn-reset {
  margin-top: 16px;
  padding: 8px 14px;
  border-radius: 999px;
  background: linear-gradient(135deg, #fffbf2, #fdbf12);
  border: none;
  cursor: pointer;
  color: #08323a;
}
