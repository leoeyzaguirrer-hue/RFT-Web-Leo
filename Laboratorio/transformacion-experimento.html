<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Laboratorio RFT ¬∑ Transformaci√≥n de Funciones</title>

  <!-- Estilos del laboratorio -->
  <link rel="stylesheet" href="css/transformacion.css" />
  <link rel="stylesheet" href="css/mobile-fix.css">
</head>

<body>
  <!-- Referencia superior, discreta -->
  <div class="ref-superior">
    Basado en: Dougher, M. J., Hamilton, D. A., Fink, B. C., & Harrington, J. (2007).
    Transformation of the discriminative and eliciting functions of generalized relational stimuli.
    <em>Journal of the Experimental Analysis of Behavior, 88(2), 179‚Äì197.</em>
  </div>

  <!-- HERO -->
  <header class="hero">
    <h1>LABORATORIO RFT ¬∑ TRANSFORMACI√ìN DE FUNCIONES</h1>
    <p>Simulaci√≥n del estudio de Dougher et al. sobre relaciones ordinales y transformaci√≥n de funciones.</p>
  </header>

  <!-- TARJETA PRINCIPAL -->
  <main class="lab-card">

    <!-- FASE 1 -->
    <section id="fase1" class="fase fase-activa">
      <h2>FASE 1 ¬∑ Aprendizaje de relaciones ordinales</h2>
      <p class="intro-fase">
        En esta fase, los participantes aprenden que, seg√∫n el s√≠mbolo de contexto, deben elegir
        siempre el est√≠mulo m√°s peque√±o, el mediano o el m√°s grande de entre nueve opciones.
      </p>

      <div class="contexto-panel">
        <div class="contexto-info">
          <h3 id="tituloContexto">Contexto A ¬∑ Elegir el m√°s peque√±o</h3>
          <p id="textoContexto">
            Observa el s√≠mbolo de contexto y luego selecciona el est√≠mulo que corresponde
            a la regla de esta fase.
          </p>
          <div class="contexto-simbolo" id="simboloContexto">
            <!-- Se rellena por JS (A, B o C con barras como en el paper) -->
          </div>
          <p class="progreso" id="progresoContexto">Ensayo 1 de 3</p>
        </div>

        <div class="panel-estimulos">
          <div id="gridEstimulos" class="grid-estimulos">
            <!-- Aqu√≠ aparecen los 9 est√≠mulos por JS -->
          </div>
          <div id="mensajeF1" class="mensaje-fase"></div>
        </div>
      </div>

      <div class="botonera-fase">
        <button id="btnNuevoEnsayo" class="btn-principal">NUEVO ENSAYO</button>
        <button id="btnSiguienteContexto" class="btn-principal btn-secundario" disabled>
          PASAR AL SIGUIENTE CONTEXTO
        </button>
      </div>

      <div id="resumenF1" class="resumen oculto">
        <h3>Resumen de la Fase 1</h3>
        <p>
          Los participantes aprendieron una red ordinal arbitraria:
          en presencia de A se elige siempre el est√≠mulo m√°s peque√±o, con B el mediano y con C el m√°s grande.
          Esta red permite luego que nuevas funciones se distribuyan siguiendo ese orden.
        </p>
        <button id="btnIrFase2" class="btn-principal">IR A FASE 2</button>
      </div>
    </section>

    <!-- FASE 2 -->
    <section id="fase2" class="fase">
      <h2>FASE 2 ¬∑ Asignaci√≥n de funci√≥n aversiva (simulada)</h2>
      <p class="intro-fase">
        En el estudio original, solo uno de los est√≠mulos se emparej√≥ con una descarga el√©ctrica.
        Aqu√≠ lo simulamos con un efecto visual sobre un s√≠mbolo objetivo.
      </p>

      <div class="panel-fase2">
        <div class="target-fase2">
          <div class="contexto-simbolo simbolo-fase2">
            B
            <div class="barras-fase2">
              <span></span><span></span><span></span>
            </div>
          </div>
          <div class="estimulo-shock" id="estimuloShock">
            <!-- SVG tipo cruz roja + estrella negra -->
            <svg viewBox="0 0 120 120" class="svg-cruz">
              <rect x="40" y="10" width="40" height="100" rx="8" />
              <rect x="10" y="40" width="100" height="40" rx="8" />
            </svg>
            <svg viewBox="0 0 120 120" class="svg-estrella">
              <line x1="60" y1="5"  x2="60" y2="115" />
              <line x1="5"  y1="60" x2="115" y2="60" />
              <line x1="20" y1="20" x2="100" y2="100" />
              <line x1="20" y1="100" x2="100" y2="20" />
              <circle cx="60" cy="60" r="10" />
            </svg>
          </div>
        </div>

        <div class="texto-fase2">
          <p id="textoFase2">
            Este s√≠mbolo representar√° el ‚Äúm√°s grande‚Äù dentro de la red. Haz clic en el bot√≥n para simular
            la entrega del est√≠mulo aversivo sobre √©l.
          </p>
          <button id="btnAplicarShock" class="btn-principal">APLICAR ‚ö°</button>

          <div id="resumenF2" class="resumen oculto">
            <p>
              Solo este est√≠mulo recibi√≥ la ‚Äúdescarga‚Äù (en nuestra simulaci√≥n, un cambio visual intenso).
              En la siguiente fase observaremos c√≥mo esa funci√≥n se distribuye a otros est√≠mulos de la red.
            </p>
            <button id="btnIrFase3" class="btn-principal">CONTINUAR A FASE 3</button>
          </div>
        </div>
      </div>
    </section>

    <!-- FASE 3 -->
    <section id="fase3" class="fase">
      <h2>FASE 3 ¬∑ Transformaci√≥n de funciones</h2>
      <p class="intro-fase">
        Aunque solo el est√≠mulo ‚Äúm√°s grande‚Äù recibi√≥ el est√≠mulo aversivo directo,
        los dem√°s est√≠mulos adquieren funciones aversivas en distintos grados, siguiendo la red ordinal aprendida.
      </p>

      <button id="btnMostrarResultados" class="btn-principal">MOSTRAR RESULTADOS</button>

      <div id="resultadosF3" class="resultados oculto">
        <!-- Resultado S3 (m√°s grande) -->
        <article class="card-resultado nivel3">
          <h3>Est√≠mulo ‚ÄúM√°s grande‚Äù</h3>
          <div class="fila-resultado">
            <svg viewBox="0 0 120 120" class="svg-estrella grande">
              <line x1="60" y1="5"  x2="60" y2="115" />
              <line x1="5"  y1="60" x2="115" y2="60" />
              <line x1="20" y1="20" x2="100" y2="100" />
              <line x1="20" y1="100" x2="100" y2="20" />
              <circle cx="60" cy="60" r="12" />
            </svg>
            <div class="intensidad">
              <div class="barra"><div class="relleno nivel3"></div></div>
              <div class="fuegos">üî•üî•üî•</div>
            </div>
          </div>
          <p>Funci√≥n aversiva alta: est√≠mulo emparejado directamente con la ‚Äúdescarga‚Äù.</p>
        </article>

        <!-- Resultado S2 -->
        <article class="card-resultado nivel2">
          <h3>Est√≠mulo ‚ÄúMediano‚Äù</h3>
          <div class="fila-resultado">
            <svg viewBox="0 0 120 120" class="svg-estrella mediana">
              <line x1="60" y1="10" x2="60" y2="110" />
              <line x1="10" y1="60" x2="110" y2="60" />
              <line x1="25" y1="25" x2="95" y2="95" />
              <line x1="25" y1="95" x2="95" y2="25" />
              <circle cx="60" cy="60" r="9" />
            </svg>
            <div class="intensidad">
              <div class="barra"><div class="relleno nivel2"></div></div>
              <div class="fuegos">üî•üî•</div>
            </div>
          </div>
          <p>Funci√≥n aversiva moderada: no recibi√≥ descarga directa, pero est√° ordenado ‚Äúcerca‚Äù del mayor.</p>
        </article>

        <!-- Resultado S1 -->
        <article class="card-resultado nivel1">
          <h3>Est√≠mulo ‚ÄúM√°s peque√±o‚Äù</h3>
          <div class="fila-resultado">
            <svg viewBox="0 0 120 120" class="svg-estrella pequena">
              <line x1="60" y1="20" x2="60" y2="100" />
              <line x1="20" y1="60" x2="100" y2="60" />
              <line x1="30" y1="30" x2="90" y2="90" />
              <line x1="30" y1="90" x2="90" y2="30" />
              <circle cx="60" cy="60" r="7" />
            </svg>
            <div class="intensidad">
              <div class="barra"><div class="relleno nivel1"></div></div>
              <div class="fuegos">üî•</div>
            </div>
          </div>
          <p>Funci√≥n aversiva leve: se comporta ‚Äúcomo si‚Äù tambi√©n fuera peligroso, por su relaci√≥n con los otros.</p>
        </article>

        <button id="btnReiniciar" class="btn-principal btn-secundario">
          REINICIAR LABORATORIO
        </button>
      </div>
    </section>
  </main>

  <!-- Referencia inferior -->
  <footer class="ref-inferior">
    Dougher, M. J., Hamilton, D. A., Fink, B. C., & Harrington, J. (2007).
    Transformation of the discriminative and eliciting functions of generalized relational stimuli.
    <em>Journal of the Experimental Analysis of Behavior, 88(2), 179‚Äì197.</em>
  </footer>

  <!-- L√≥gica del laboratorio -->
  <script defer src="js/transformacion.js"></script>
</body>
</html>
