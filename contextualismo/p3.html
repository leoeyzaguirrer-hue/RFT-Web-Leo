<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>P3 ¬∑ Fundamentos del Contextualismo Funcional</title>

  <style>
    :root {
      --azul-1: #0A2A5C;
      --azul-2: #132F66;
      --azul-3: #000C1A;
      --azul-soft: #E3ECFF;
      --dorado: #FDBF12;
      --dorado-soft: #FFD978;
      --blanco: #FFFFFF;
      --gris-texto: #2B3650;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: "Noto Sans", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      min-height: 100vh;
      background:
        radial-gradient(circle at top left, rgba(10,42,92,0.12), transparent 55%),
        radial-gradient(circle at bottom right, rgba(253,191,18,0.14), transparent 55%),
        linear-gradient(180deg, #E9EFF8 0%, #FFFFFF 38%, #F5F7FC 100%);
      color: var(--gris-texto);
    }

    /* HEX√ÅGONOS SUAVES */
    .hex-bg {
      position: fixed;
      width: 320px;
      height: 320px;
      background: url("../assets/icons/hex-gold.png") no-repeat center/contain;
      opacity: 0.05;
      z-index: -1;
      pointer-events: none;
      filter: drop-shadow(0 0 12px rgba(253,191,18,0.35));
      animation: floatHex 18s ease-in-out infinite;
    }

    .hex-bg.h1 { top: -40px; left: -40px; }
    .hex-bg.h2 { bottom: -60px; right: -20px; transform: rotate(18deg); }

    @keyframes floatHex {
      0% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0); }
    }

    /* BOT√ìN VOLVER */
    .top-nav {
      position: fixed;
      top: 18px;
      left: 18px;
      z-index: 10;
    }

    .top-nav a {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px;
      border-radius: 999px;
      border: 1px solid rgba(10,42,92,0.18);
      background: rgba(255,255,255,0.9);
      color: var(--azul-1);
      font-size: 14px;
      text-decoration: none;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      box-shadow: 0 6px 12px rgba(0,0,0,0.06);
      transition: 0.2s ease;
    }

    .top-nav a:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 18px rgba(0,0,0,0.10);
    }

    /* CONTENEDOR PRINCIPAL */
    .container {
      max-width: 1160px;
      margin: 90px auto 70px auto;
      padding: 0 24px 40px 24px;
    }

    .tag {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 4px 12px;
      border-radius: 999px;
      border: 1px solid rgba(10,42,92,0.20);
      background: rgba(255,255,255,0.9);
      font-size: 13px;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: var(--azul-2);
      margin-bottom: 12px;
    }

    .tag-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--dorado);
      box-shadow: 0 0 10px rgba(253,191,18,0.8);
    }

    h1 {
      font-family: "Coco Gothic", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      font-size: 34px;
      letter-spacing: 0.10em;
      text-transform: uppercase;
      margin: 0 0 8px 0;
      color: var(--azul-1);
    }

    .sub {
      font-size: 20px;
      opacity: 0.9;
      max-width: 760px;
      margin-bottom: 14px;
    }

    .intro {
      font-size: 18px;
      line-height: 1.7;
      max-width: 860px;
      margin-bottom: 24px;
    }

    /* TARJETAS GENERALES */
    .card-soft {
      background: rgba(255,255,255,0.96);
      border-radius: 24px;
      padding: 18px 20px 20px 20px;
      box-shadow:
        0 12px 26px rgba(15,33,71,0.08),
        0 0 0 1px rgba(10,42,92,0.04);
      margin-bottom: 24px;
    }

    .card-title-label {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--azul-2);
      opacity: 0.85;
      margin-bottom: 6px;
    }

    .card-title {
      font-size: 20px;
      font-weight: 700;
      color: var(--azul-1);
      margin-bottom: 8px;
    }

    .card-body {
      font-size: 17px;
      line-height: 1.7;
    }

    .bullets {
      margin-top: 8px;
      padding-left: 18px;
      font-size: 17px;
      line-height: 1.7;
    }

    .highlight {
      margin-top: 14px;
      padding: 10px 12px;
      border-radius: 14px;
      background: linear-gradient(90deg, rgba(253,191,18,0.12), rgba(255,255,255,0.9));
      border-left: 4px solid var(--dorado);
      font-size: 16px;
    }

    /* SECCIONES */
    .section-heading {
      margin-top: 34px;
      margin-bottom: 6px;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--azul-2);
      opacity: 0.9;
    }

    .section-title {
      font-size: 22px;
      font-weight: 700;
      color: var(--azul-1);
      margin-bottom: 8px;
    }

    .section-text {
      font-size: 17px;
      max-width: 800px;
      line-height: 1.7;
      margin-bottom: 14px;
    }

    /* OPCIONES MULTIPLE CHOICE */
    .option-card {
      border-radius: 16px;
      padding: 10px 12px;
      border: 1px solid rgba(10,42,92,0.12);
      background: #F7F8FD;
      font-size: 15px;
      cursor: pointer;
      text-align: left;
      transition: 0.18s ease;
      margin-bottom: 8px;
    }

    .option-card:hover {
      background: #EEF2FF;
      transform: translateY(-1px);
      box-shadow: 0 6px 14px rgba(15,33,71,0.10);
    }

    .option-card.correct {
      border-color: rgba(46,160,67,0.9);
      background: #E6F7EA;
      box-shadow: 0 0 0 1px rgba(46,160,67,0.6);
    }

    .option-card.wrong {
      border-color: rgba(200,50,50,0.7);
      background: #FDEAEA;
      box-shadow: 0 0 0 1px rgba(200,50,50,0.55);
    }

    .mc-feedback {
      margin-top: 8px;
      font-size: 15px;
      min-height: 38px;
      color: var(--azul-2);
    }

    /* GRID CRITERIOS */
    .criteria-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 16px;
      margin-top: 12px;
    }

    @media (max-width: 960px) {
      .criteria-grid {
        grid-template-columns: 1fr;
      }
    }

    .criteria-col {
      background: rgba(255,255,255,0.96);
      border-radius: 18px;
      border: 1px solid rgba(10,42,92,0.08);
      padding: 10px 12px 12px 12px;
      box-shadow: 0 8px 18px rgba(15,33,71,0.05);
      min-height: 120px;
    }

    .criteria-title {
      font-size: 15px;
      font-weight: 700;
      color: var(--azul-1);
      margin-bottom: 4px;
    }

    .criteria-sub {
      font-size: 13px;
      color: var(--azul-2);
      opacity: 0.8;
      margin-bottom: 6px;
    }

    .drop-zone {
      border-radius: 14px;
      border: 1px dashed rgba(10,42,92,0.25);
      padding: 8px;
      min-height: 60px;
      font-size: 14px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .draggable {
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(10,42,92,0.3);
      background: #F0F3FF;
      font-size: 14px;
      cursor: grab;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: 0.18s ease;
    }

    .draggable:hover {
      background: #E1E7FF;
      transform: translateY(-1px);
    }

    .draggable-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--dorado);
    }

    .drag-pool {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .criteria-feedback {
      margin-top: 10px;
      font-size: 14px;
      min-height: 40px;
    }

    .criteria-feedback.ok {
      color: #1C7A3F;
    }

    .criteria-feedback.warn {
      color: #A0492D;
    }

    /* TARJETAS CLIC PARA REVELAR */
    .cards-row {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 14px;
      margin-top: 10px;
    }

    @media (max-width: 960px) {
      .cards-row {
        grid-template-columns: 1fr;
      }
    }

    .reveal-card {
      border-radius: 18px;
      border: 1px solid rgba(10,42,92,0.12);
      background: #F7F8FD;
      padding: 12px 14px;
      font-size: 15px;
      cursor: pointer;
      transition: 0.18s ease;
      min-height: 80px;
    }

    .reveal-card:hover {
      background: #EEF2FF;
      transform: translateY(-1px);
      box-shadow: 0 8px 18px rgba(15,33,71,0.12);
    }

    .reveal-card strong {
      display: block;
      margin-bottom: 4px;
      color: var(--azul-1);
    }

    .reveal-extra {
      margin-top: 6px;
      font-size: 14px;
      opacity: 0.95;
    }

    .reveal-card.active {
      background: linear-gradient(135deg, #FFFFFF, #FFF6E1);
      border-color: var(--dorado);
      box-shadow: 0 0 0 1px rgba(253,191,18,0.7);
    }

    /* CONTEXTOS MENSAJE */
    .context-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 14px;
      margin-top: 10px;
    }

    @media (max-width: 1020px) {
      .context-grid {
        grid-template-columns: 1fr;
      }
    }

    .context-card {
      border-radius: 18px;
      background: rgba(255,255,255,0.96);
      border: 1px solid rgba(10,42,92,0.10);
      padding: 12px 14px;
      font-size: 15px;
      cursor: pointer;
      transition: 0.2s ease;
      box-shadow: 0 6px 16px rgba(15,33,71,0.06);
    }

    .context-card strong {
      display: block;
      margin-bottom: 4px;
      color: var(--azul-1);
    }

    .context-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(15,33,71,0.12);
      border-color: rgba(253,191,18,0.7);
    }

    .context-card.active {
      border-color: var(--dorado);
      box-shadow: 0 0 0 2px rgba(253,191,18,0.7);
      background: linear-gradient(135deg, #FFFFFF, #FFF7E3);
    }

    .context-result {
      margin-top: 10px;
      font-size: 16px;
      min-height: 50px;
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(255,255,255,0.9);
      border-left: 4px solid rgba(10,42,92,0.14);
    }

    /* NAVEGACI√ìN INFERIOR */
    .nav-buttons {
      margin-top: 40px;
      display: flex;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
    }

    .btn-nav {
      padding: 11px 20px;
      border-radius: 999px;
      border: 2px solid var(--azul-1);
      background: var(--azul-1);
      color: var(--blanco);
      font-size: 16px;
      font-weight: 600;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: 0.22s ease;
    }

    .btn-nav.secondary {
      background: transparent;
      color: var(--azul-1);
      border-color: rgba(10,42,92,0.4);
    }

    .btn-nav:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 18px rgba(15,33,71,0.22);
    }
  </style>
</head>
<body>

  <div class="hex-bg h1"></div>
  <div class="hex-bg h2"></div>

  <div class="top-nav">
    <a href="index.html">‚üµ Volver al men√∫ del m√≥dulo</a>
  </div>

  <div class="container">

    <div class="tag">
      <span class="tag-dot"></span>
      PANTALLA 3 ¬∑ FUNDAMENTOS DEL CONTEXTUALISMO
    </div>

    <h1>Fundamentos del contextualismo funcional</h1>

    <div class="sub">
      Criterio pragm√°tico de verdad y prop√≥sito central de la ciencia en la psicolog√≠a conductual contextual.
    </div>

    <p class="intro">
      El contextualismo funcional propone que una explicaci√≥n es v√°lida si permite
      <strong>predecir e influir la conducta</strong> con precisi√≥n, alcance y profundidad.
      En lugar de buscar causas internas, describe c√≥mo historia, contexto y lenguaje
      organizan la conducta-en-contexto. Este criterio es la base del an√°lisis funcional, ACT y RFT.
    </p>

    <!-- SECCI√ìN 1: VERDAD = LO QUE FUNCIONA -->
    <section class="card-soft">
      <div class="card-title-label">Idea central</div>
      <div class="card-title">‚ÄúVerdad‚Äù como lo que funciona</div>

      <div class="card-body">
        Desde el contextualismo funcional, una filosof√≠a de la ciencia no busca descubrir
        entidades internas ocultas, sino establecer <strong>criterios pragm√°ticos</strong>:
        <ul class="bullets">
          <li>¬øQu√© explicaciones permiten <strong>predecir</strong> la conducta?</li>
          <li>¬øQu√© explicaciones permiten <strong>influenciarla</strong> de manera efectiva?</li>
          <li>¬øCon qu√© <strong>precisi√≥n, alcance y profundidad</strong> lo hacen?</li>
        </ul>

        <div class="highlight">
          Un modelo es ‚Äúverdadero‚Äù en la medida en que gu√≠a acciones √∫tiles
          sobre la conducta-en-contexto, no porque describa con exactitud un
          ‚Äúmundo interno‚Äù independiente.
        </div>

        <div style="margin-top: 14px; font-size: 15px;">
          Micro-actividad: elige el criterio de verdad m√°s coherente con el contextualismo funcional.
        </div>

        <button
          class="option-card mc1-option"
          data-correct="false"
          data-feedback="Esta opci√≥n corresponde a una filosof√≠a representacional: la verdad como espejo de una realidad interna. El contextualismo funcional no se centra en ‚Äúdescribir‚Äù un interior, sino en guiar acciones eficaces.">
          A) Una explicaci√≥n es verdadera si representa fielmente la realidad interna del individuo.
        </button>

        <button
          class="option-card mc1-option"
          data-correct="false"
          data-feedback="La coherencia l√≥gica puede ser deseable, pero no es suficiente para una ciencia contextual. Podemos tener explicaciones l√≥gicamente elegantes que no permiten intervenir con eficacia.">
          B) Una explicaci√≥n es verdadera si es l√≥gicamente coherente, aunque no cambie nada en la conducta.
        </button>

        <button
          class="option-card mc1-option"
          data-correct="true"
          data-feedback="Este es el criterio pragm√°tico: lo que cuenta como verdad es lo que funciona para predecir e influir la conducta con precisi√≥n, alcance y profundidad, al servicio de prop√≥sitos definidos.">
          C) Una explicaci√≥n es verdadera si funciona para predecir e influir la conducta con precisi√≥n, alcance y profundidad.
        </button>

        <button
          class="option-card mc1-option"
          data-correct="false"
          data-feedback="Apelar a la autoridad del terapeuta introduce criterios personales m√°s que cient√≠ficos. El contextualismo funcional demanda criterios expl√≠citos, p√∫blicos y ligados a efectos sobre la conducta.">
          D) Una explicaci√≥n es verdadera si el terapeuta considera que refleja bien lo que ve en sesi√≥n.
        </button>

        <div class="mc-feedback" id="mc1-feedback">
          Elige una opci√≥n para ver c√≥mo cambia el criterio de verdad seg√∫n la filosof√≠a.
        </div>
      </div>
    </section>

    <!-- SECCI√ìN 2: PRECISI√ìN, ALCANCE, PROFUNDIDAD -->
    <div class="section-heading">Evaluar explicaciones</div>
    <div class="section-title">Precisi√≥n, alcance y profundidad</div>
    <div class="section-text">
      Hayes, Barnes-Holmes y Wilson proponen que una ciencia contextual eval√∫a sus modelos
      seg√∫n tres criterios principales:
    </div>

    <section class="card-soft">
      <div class="card-body">
        <ul class="bullets">
          <li><strong>Precisi√≥n</strong>: qu√© tan bien predice una conducta en un contexto espec√≠fico.</li>
          <li><strong>Alcance</strong>: cu√°ntos fen√≥menos distintos puede organizar esa explicaci√≥n.</li>
          <li><strong>Profundidad</strong>: qu√© tan coherente es con principios de la ciencia natural
              (evoluci√≥n, aprendizaje, variabilidad).</li>
        </ul>

        <div style="margin-top: 10px; font-size: 15px;">
          Actividad: arrastra cada enunciado al criterio que mejor ilustra.
        </div>

        <!-- POOL DRAGGABLES -->
        <div class="drag-pool" id="drag-pool">
          <div class="draggable" draggable="true" data-target="precision">
            <span class="draggable-dot"></span>
            Predice que evitar una reuni√≥n reduce la ansiedad inmediata.
          </div>
          <div class="draggable" draggable="true" data-target="alcance">
            <span class="draggable-dot"></span>
            Organiza evitaci√≥n, rigidez y conducta verbal bajo los mismos principios.
          </div>
          <div class="draggable" draggable="true" data-target="profundidad">
            <span class="draggable-dot"></span>
            Es consistente con procesos de aprendizaje y evoluci√≥n del organismo.
          </div>
          <div class="draggable" draggable="true" data-target="baja-precision">
            <span class="draggable-dot"></span>
            Funciona solo en un caso aislado y falla al generalizar.
          </div>
          <div class="draggable" draggable="true" data-target="baja-alcance">
            <span class="draggable-dot"></span>
            Explica ansiedad y tristeza con la misma causa interna inespec√≠fica.
          </div>
          <div class="draggable" draggable="true" data-target="baja-profundidad">
            <span class="draggable-dot"></span>
            Ignora historia de aprendizaje y solo apela a rasgos internos fijos.
          </div>
        </div>

        <!-- GRID CRITERIOS -->
        <div class="criteria-grid">
          <div class="criteria-col" data-criterion="precision">
            <div class="criteria-title">Precisi√≥n</div>
            <div class="criteria-sub">Predicci√≥n ajustada a contextos espec√≠ficos</div>
            <div class="drop-zone" data-accept="precision baja-precision"></div>
          </div>
          <div class="criteria-col" data-criterion="alcance">
            <div class="criteria-title">Alcance</div>
            <div class="criteria-sub">Variedad de fen√≥menos que organiza</div>
            <div class="drop-zone" data-accept="alcance baja-alcance"></div>
          </div>
          <div class="criteria-col" data-criterion="profundidad">
            <div class="criteria-title">Profundidad</div>
            <div class="criteria-sub">Coherencia con la ciencia natural</div>
            <div class="drop-zone" data-accept="profundidad baja-profundidad"></div>
          </div>
        </div>

        <div class="criteria-feedback" id="criteria-feedback">
          Arrastra cada enunciado a la categor√≠a que creas adecuada. Luego observa qu√© tan completa es tu clasificaci√≥n.
        </div>
      </div>
    </section>

    <!-- SECCI√ìN 3: EVENTO = INTERACCI√ìN -->
    <div class="section-heading">Qu√© es un ‚Äúevento‚Äù</div>
    <div class="section-title">El evento como conducta-en-contexto</div>
    <div class="section-text">
      En el contextualismo funcional, un evento psicol√≥gico no es una ‚Äúcosa dentro‚Äù de la persona.
      Es la <strong>interacci√≥n</strong> entre historia de aprendizaje, est√≠mulos actuales, redes verbales
      y respuestas del organismo.
    </div>

    <section class="card-soft">
      <div class="card-body">
        Toca cada tarjeta para ver c√≥mo se vuelve parte del evento:

        <div class="cards-row">
          <div class="reveal-card" data-extra="El mensaje adquiere funci√≥n seg√∫n la historia relacional de la persona con frases similares. No es neutro: participa en patrones de predicci√≥n y evitaci√≥n.">
            <strong>üì© Mensaje: ‚ÄúNecesitamos hablar‚Äù</strong>
            <span class="reveal-extra"></span>
          </div>

          <div class="reveal-card" data-extra="Pensar ¬´algo malo hice¬ª es una acci√≥n verbal bajo control contextual; no es un espejo de la realidad, sino un elemento que gu√≠a la conducta.">
            <strong>üí¨ Pensamiento: ¬´algo malo hice¬ª</strong>
            <span class="reveal-extra"></span>
          </div>

          <div class="reveal-card" data-extra="El peso en el pecho forma parte del patr√≥n de respuesta del organismo. Integra historia, lenguaje y situaci√≥n actual en una misma unidad funcional.">
            <strong>ü§≤ Sensaci√≥n: peso en el pecho</strong>
            <span class="reveal-extra"></span>
          </div>
        </div>

        <div class="highlight" style="margin-top: 16px;">
          El evento que analizamos es la <strong>conducta-en-contexto</strong> que emerge de la
          interacci√≥n de todos estos elementos, no un solo componente aislado.
        </div>
      </div>
    </section>

    <!-- SECCI√ìN 4: EXPLICACI√ìN CONTEXTUALISTA vs MENTALISTA -->
    <div class="section-heading">Diferentes formas de explicar</div>
    <div class="section-title">Explicaci√≥n nombres vs explicaci√≥n funcional</div>
    <div class="section-text">
      Decir que alguien act√∫a ‚Äúporque tiene ansiedad‚Äù puede ser solo una etiqueta.
      El contextualismo funcional busca variables modificables: antecedentes, funciones, historia, contingencias, redes verbales.
    </div>

    <section class="card-soft">
      <div class="card-body">
        Caso: Ana evita contestar un correo importante del trabajo.  
        Elige la explicaci√≥n m√°s coherente con un enfoque contextual funcional:

        <button
          class="option-card mc2-option"
          data-correct="false"
          data-feedback="Nombrar ‚Äòmiedo al rechazo‚Äô sin describir c√≥mo se organiza en la historia y el contexto mantiene la explicaci√≥n en el plano de etiquetas internas. Falta an√°lisis funcional.">
          A) Ana act√∫a as√≠ porque tiene miedo al rechazo y ese es su rasgo principal.
        </button>

        <button
          class="option-card mc2-option"
          data-correct="false"
          data-feedback="Hablar de ‚Äúinterpretar mal‚Äù sigue ubicando el problema en un d√©ficit interno general, sin especificar variables contextuales ni funciones concretas.">
          B) Ana interpreta mal las se√±ales sociales y eso explica su conducta.
        </button>

        <button
          class="option-card mc2-option"
          data-correct="true"
          data-feedback="Esta explicaci√≥n contextualiza la frase ‚Äúvoy a quedar mal‚Äù en la historia de Ana y describe su funci√≥n actual: se√±al de amenaza que organiza evitaci√≥n. Esto permite intervenir sobre funciones y contextos, no solo sobre etiquetas internas.">
          C) La historia de Ana con cr√≠ticas hace que ‚Äúvoy a quedar mal‚Äù funcione como se√±al de amenaza,
          organizando evitaci√≥n del correo y alivio inmediato.
        </button>

        <button
          class="option-card mc2-option"
          data-correct="false"
          data-feedback="Describir a Ana como ‚Äúmuy sensible‚Äù introduce un rasgo global poco operativo. El contextualismo funcional pide descripciones funcionales ligadas a contextos espec√≠ficos.">
          D) Ana es muy sensible emocionalmente y por eso evita situaciones exigentes.
        </button>

        <div class="mc-feedback" id="mc2-feedback">
          Toca una opci√≥n para ver c√≥mo cambia la forma de explicar la misma conducta.
        </div>
      </div>
    </section>

    <!-- SECCI√ìN 5: CONTEXTO CAMBIA FUNCI√ìN -->
    <div class="section-heading">Mismo est√≠mulo, funciones distintas</div>
    <div class="section-title">El contexto hace al evento</div>
    <div class="section-text">
      Un mismo mensaje puede adquirir funciones muy distintas seg√∫n la historia y el contexto.
      El contextualismo no pregunta ‚Äú¬øqu√© significa en abstracto?‚Äù, sino <strong>qu√© hace en la conducta aqu√≠ y ahora</strong>.
    </div>

    <section class="card-soft">
      <div class="card-body">
        Mensaje base: <strong>üì© ‚ÄúTenemos que hablar‚Äù</strong>

        <div class="context-grid">
          <button
            class="context-card ctx"
            data-funcion="Tras varias discusiones recientes, el mensaje funciona como <strong>se√±al de posible conflicto</strong>. La conducta probable es tensi√≥n, defensa o evitaci√≥n.">
            <strong>Contexto A ¬∑ Pareja tras varios conflictos</strong>
            √öltimos encuentros marcados por reproches y discusiones pendientes.
          </button>

          <button
            class="context-card ctx"
            data-funcion="En un entorno donde el jefe suele reconocer el trabajo, el mensaje funciona como <strong>oportunidad</strong>. La conducta probable es preparaci√≥n, acercamiento, curiosidad.">
            <strong>Contexto B ¬∑ Jefatura que da retroalimentaci√≥n constructiva</strong>
            Reuniones previas asociadas a reconocimiento y revisi√≥n de ideas.
          </button>

          <button
            class="context-card ctx"
            data-funcion="Entre amistades cercanas, el mensaje puede funcionar como <strong>invitar a aclarar algo importante</strong>, con mezcla de vulnerabilidad y confianza. La conducta probable es di√°logo y exploraci√≥n.">
            <strong>Contexto C ¬∑ Amigo cercano y confiable</strong>
            Historial de conversaciones honestas donde se cuidan mutuamente.
          </button>
        </div>

        <div class="context-result" id="context-result-3">
          Toca cada contexto para ver c√≥mo cambia la funci√≥n del mismo mensaje seg√∫n la historia y la relaci√≥n.
        </div>
      </div>
    </section>

    <!-- CIERRE -->
    <section class="card-soft">
      <div class="card-title-label">Cierre de la pantalla</div>
      <div class="card-title">Del criterio pragm√°tico a la unidad de an√°lisis</div>
      <div class="card-body">
        En esta pantalla revisaste c√≥mo el contextualismo funcional eval√∫a sus explicaciones:
        <strong>lo verdadero es lo que funciona</strong> para predecir e influir la conducta con
        precisi√≥n, alcance y profundidad.  
        Tambi√©n viste que:
        <ul class="bullets">
          <li>los eventos psicol√≥gicos se entienden como <strong>conducta-en-contexto</strong>,</li>
          <li>las explicaciones √∫tiles describen <strong>funciones</strong>, no solo contenidos,</li>
          <li>el contexto y la historia transforman las funciones de los eventos.</li>
        </ul>
        Esto prepara el paso siguiente del m√≥dulo: definir con claridad
        <strong>cu√°l es la unidad de an√°lisis</strong> en esta filosof√≠a: la conducta-en-contexto.
      </div>
    </section>

    <!-- NAVEGACI√ìN INFERIOR -->
    <div class="nav-buttons">
      <a href="p2.html" class="btn-nav secondary">
        ‚üµ Volver a P2 ¬∑ ¬øQu√© es una filosof√≠a de la ciencia?
      </a>
      <a href="p4.html" class="btn-nav">
        P4 ¬∑ La conducta como evento interactivo ‚ü∂
      </a>
    </div>

  </div>

  <script>
    // MULTIPLE CHOICE 1
    const mc1Options = document.querySelectorAll(".mc1-option");
    const mc1Feedback = document.getElementById("mc1-feedback");

    mc1Options.forEach(card => {
      card.addEventListener("click", () => {
        mc1Options.forEach(c => c.classList.remove("correct", "wrong"));
        const isCorrect = card.dataset.correct === "true";
        card.classList.add(isCorrect ? "correct" : "wrong");
        mc1Feedback.innerHTML = card.dataset.feedback;
      });
    });

    // MULTIPLE CHOICE 2
    const mc2Options = document.querySelectorAll(".mc2-option");
    const mc2Feedback = document.getElementById("mc2-feedback");

    mc2Options.forEach(card => {
      card.addEventListener("click", () => {
        mc2Options.forEach(c => c.classList.remove("correct", "wrong"));
        const isCorrect = card.dataset.correct === "true";
        card.classList.add(isCorrect ? "correct" : "wrong");
        mc2Feedback.innerHTML = card.dataset.feedback;
      });
    });

    // DRAG & DROP CRITERIOS
    const draggables = document.querySelectorAll(".draggable");
    const dropZones = document.querySelectorAll(".drop-zone");
    const dragPool = document.getElementById("drag-pool");
    const criteriaFeedback = document.getElementById("criteria-feedback");

    draggables.forEach(el => {
      el.addEventListener("dragstart", e => {
        e.dataTransfer.setData("text/plain", el.dataset.target);
        e.dataTransfer.effectAllowed = "move";
        el.classList.add("dragging");
      });

      el.addEventListener("dragend", () => {
        el.classList.remove("dragging");
      });
    });

    dropZones.forEach(zone => {
      zone.addEventListener("dragover", e => {
        e.preventDefault();
      });

      zone.addEventListener("drop", e => {
        e.preventDefault();
        const targetKey = e.dataTransfer.getData("text/plain");
        const dragged = document.querySelector(`.draggable[data-target="${targetKey}"]`);
        if (!dragged) return;

        // Evitar duplicados en el mismo drop
        if (!zone.contains(dragged)) {
          zone.appendChild(dragged);
        }

        evaluarCriterios();
      });
    });

    // Permitir volver a la pool si se suelta all√≠
    dragPool.addEventListener("dragover", e => {
      e.preventDefault();
    });

    dragPool.addEventListener("drop", e => {
      e.preventDefault();
      const targetKey = e.dataTransfer.getData("text/plain");
      const dragged = document.querySelector(`.draggable[data-target="${targetKey}"]`);
      if (!dragged) return;
      dragPool.appendChild(dragged);
      evaluarCriterios();
    });

    function evaluarCriterios() {
      let correctos = 0;
      let totalEsperado = 6;

      dropZones.forEach(zone => {
        const aceptados = (zone.dataset.accept || "").split(" ");
        const hijos = zone.querySelectorAll(".draggable");
        hijos.forEach(h => {
          if (aceptados.includes(h.dataset.target)) {
            correctos++;
          }
        });
      });

      if (correctos === totalEsperado) {
        criteriaFeedback.textContent =
          "Excelente: has distribuido correctamente los ejemplos. Precisi√≥n, alcance y profundidad trabajan juntas para evaluar la utilidad de una explicaci√≥n contextual.";
        criteriaFeedback.classList.add("ok");
        criteriaFeedback.classList.remove("warn");
      } else if (correctos > 0) {
        criteriaFeedback.textContent =
          "Vas en camino: algunos ejemplos ya est√°n bien ubicados. Revisa qu√© criterio ilustra mejor cada enunciado para completar la clasificaci√≥n.";
        criteriaFeedback.classList.add("warn");
        criteriaFeedback.classList.remove("ok");
      } else {
        criteriaFeedback.textContent =
          "A√∫n no has ubicado ejemplos correctos. Recuerda: precisi√≥n = predicci√≥n ajustada, alcance = variedad de fen√≥menos, profundidad = coherencia con la ciencia natural.";
        criteriaFeedback.classList.add("warn");
        criteriaFeedback.classList.remove("ok");
      }
    }

    // TARJETAS CLIC PARA REVELAR
    const revealCards = document.querySelectorAll(".reveal-card");

    revealCards.forEach(card => {
      const extraText = card.dataset.extra;
      const extraSpan = card.querySelector(".reveal-extra");

      card.addEventListener("click", () => {
        if (card.classList.contains("active")) {
          card.classList.remove("active");
          extraSpan.textContent = "";
        } else {
          card.classList.add("active");
          extraSpan.innerHTML = extraText;
        }
      });
    });

    // CONTEXTOS MENSAJE
    const ctxCards = document.querySelectorAll(".context-card.ctx");
    const contextResult3 = document.getElementById("context-result-3");

    ctxCards.forEach(card => {
      card.addEventListener("click", () => {
        ctxCards.forEach(c => c.classList.remove("active"));
        card.classList.add("active");
        contextResult3.innerHTML = card.dataset.funcion;
      });
    });
  </script>

</body>
</html>
