<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>P7 · Integración Contextualismo – RFT – ACT</title>

  <style>
    :root {
      --azul-1: #0A2A5C;
      --azul-2: #132F66;
      --azul-3: #000C1A;
      --dorado: #FDBF12;
      --dorado-soft: #FFD978;
      --blanco: #FFFFFF;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: "Noto Sans", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: radial-gradient(circle at top left, #12346d 0%, #050913 55%, #000000 100%);
      color: var(--blanco);
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
    }

    /* FONDO HEXAGONAL PREMIUM */
    .hex {
      position: fixed;
      width: 420px;
      height: 420px;
      background: url("../assets/icons/hex-gold.png") no-repeat center/contain;
      opacity: 0.06;
      z-index: -2;
      animation: floatHex 18s ease-in-out infinite;
      pointer-events: none;
    }

    .hex.h1 { top: 6%; left: 4%; }
    .hex.h2 { bottom: 8%; right: 6%; transform: rotate(18deg); }

    @keyframes floatHex {
      0%   { transform: translateY(0); }
      50%  { transform: translateY(-14px); }
      100% { transform: translateY(0); }
    }

    /* PARTÍCULAS DORADAS SUAVES */
    .particles {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: -1;
      background-image:
        radial-gradient(circle at 10% 20%, rgba(253,191,18,0.15) 0, transparent 55%),
        radial-gradient(circle at 80% 80%, rgba(253,191,18,0.12) 0, transparent 55%);
      opacity: 0.7;
      mix-blend-mode: screen;
    }

    /* BOTÓN VOLVER AL MENÚ */
    .top-nav {
      position: fixed;
      top: 18px;
      left: 18px;
      z-index: 10;
    }

    .top-nav a {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px;
      border-radius: 999px;
      border: 1px solid rgba(253,191,18,0.7);
      background: rgba(0,0,0,0.45);
      color: var(--blanco);
      font-size: 14px;
      text-decoration: none;
      letter-spacing: 0.03em;
      text-transform: uppercase;
      transition: 0.25s ease;
      backdrop-filter: blur(6px);
    }

    .top-nav a:hover {
      background: rgba(253,191,18,0.15);
      box-shadow: 0 0 16px rgba(253,191,18,0.7);
    }

    .top-nav span.icon {
      font-size: 16px;
      line-height: 1;
    }

    /* CONTENEDOR PRINCIPAL */
    .container {
      max-width: 1100px;
      margin: 80px auto 60px auto;
      padding: 20px 32px 40px 32px;
    }

    @media (max-width: 880px) {
      .container {
        padding-inline: 18px;
      }
    }

    .tag {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 4px 12px;
      border-radius: 999px;
      border: 1px solid rgba(253,191,18,0.6);
      background: rgba(0,0,0,0.45);
      font-size: 13px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      margin: 0 auto 12px auto;
    }

    .tag-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--dorado-soft);
      box-shadow: 0 0 10px rgba(253,191,18,0.8);
    }

    h1 {
      font-family: "Coco Gothic", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      font-size: 34px;
      text-transform: uppercase;
      letter-spacing: 0.11em;
      text-align: center;
      margin: 10px 0 8px 0;
    }

    .sub {
      font-size: 22px;
      opacity: 0.9;
      text-align: center;
      margin-bottom: 10px;
    }

    p.descripcion {
      font-size: 19px;
      opacity: 0.92;
      max-width: 880px;
      margin: 0 auto 26px auto;
      line-height: 1.7;
      text-align: center;
    }

    /* BARRA DE CAPAS (SIN CAJAS GRANDES) */
    .layers-bar {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 12px;
      margin: 26px auto 34px auto;
    }

    .layer-chip {
      padding: 6px 14px;
      border-radius: 999px;
      border: 1px solid rgba(253,191,18,0.6);
      background: rgba(5,12,24,0.45);
      font-size: 12px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      opacity: 0.9;
      backdrop-filter: blur(6px);
    }

    .layer-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      border: 2px solid var(--dorado-soft);
      box-shadow: 0 0 8px rgba(253,191,18,0.7);
    }

    /* SECCIÓN FLUJO INTERACTIVO (SIN TARJETAS) */
    .flow-section {
      margin-top: 12px;
    }

    .flow-label {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      opacity: 0.85;
      text-align: center;
      margin-bottom: 10px;
    }

    .flow-map {
      position: relative;
      width: 100%;
      max-width: 960px;
      height: 230px;
      margin: 0 auto 18px auto;
    }

    /* Línea curva sugerida */
    .flow-curve {
      position: absolute;
      inset: 50% 6%;
      height: 0;
      border-top: 2px solid rgba(253,191,18,0.4);
      border-radius: 999px;
      transform: translateY(-50%);
      box-shadow: 0 0 12px rgba(253,191,18,0.4);
    }

    .flow-node {
      position: absolute;
      min-width: 150px;
      padding: 8px 14px;
      border-radius: 999px;
      border: 1px solid rgba(253,191,18,0.7);
      background: rgba(1,5,14,0.85);
      backdrop-filter: blur(10px);
      font-size: 14px;
      line-height: 1.3;
      cursor: pointer;
      display: inline-flex;
      flex-direction: column;
      gap: 2px;
      align-items: flex-start;
      transition: 0.25s ease;
      box-shadow:
        0 8px 22px rgba(0,0,0,0.6),
        0 0 14px rgba(253,191,18,0.3);
    }

    .flow-node-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      opacity: 0.75;
    }

    .flow-node-title {
      font-weight: 700;
    }

    .flow-node:hover {
      transform: translateY(-6px) scale(1.03);
      box-shadow:
        0 10px 26px rgba(0,0,0,0.8),
        0 0 22px rgba(253,191,18,0.9);
    }

    .flow-node.active {
      background: radial-gradient(circle at top left, rgba(253,191,18,0.5), #02040b);
      border-color: var(--dorado);
      box-shadow:
        0 12px 32px rgba(0,0,0,0.9),
        0 0 26px rgba(253,191,18,1);
    }

    /* Posiciones de nodos en la curva */
    .flow-node.f1 { top: 18%; left: 6%; }
    .flow-node.f2 { top: 8%; left: 50%; transform: translateX(-50%); }
    .flow-node.f3 { top: 18%; right: 6%; }
    .flow-node.f4 { bottom: 8%; left: 50%; transform: translateX(-50%); }

    /* AVATAR CLÍNICO MINI (SE MANTIENE) */
    .avatar-wrapper {
      display: flex;
      justify-content: center;
      margin: 4px 0 10px 0;
    }

    .avatar {
      width: 78px;
      height: 78px;
      border-radius: 50%;
      border: 2px solid rgba(253,191,18,0.9);
      background: radial-gradient(circle at 30% 20%, #ffffff 0, #f7d88e 25%, #f09d4c 45%, #6b2d12 100%);
      box-shadow:
        0 0 18px rgba(253,191,18,0.9),
        0 10px 20px rgba(0,0,0,0.85);
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      transition: transform 0.3s ease, box-shadow 0.3s ease, filter 0.3s ease;
    }

    .avatar-face {
      width: 60%;
      height: 60%;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 20%, #ffe6c7 0, #f4b27b 40%, #a25733 100%);
      position: relative;
    }

    .avatar-face::before,
    .avatar-face::after {
      content: "";
      position: absolute;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      top: 38%;
      background: #3b2314;
    }

    .avatar-face::before { left: 24%; }
    .avatar-face::after  { right: 24%; }

    .avatar-mouth {
      position: absolute;
      width: 44%;
      height: 18%;
      border-radius: 0 0 40px 40px;
      border-bottom: 3px solid #3b2314;
      left: 50%;
      top: 60%;
      transform: translateX(-50%);
    }

    .avatar.state-1 .avatar-mouth {
      border-radius: 40px 40px 0 0;
      border-bottom: none;
      border-top: 3px solid #3b2314;
      top: 66%;
    }

    .avatar.state-2 .avatar-mouth {
      transform: translateX(-50%) translateY(2px);
    }

    .avatar.state-3 .avatar-mouth {
      border-bottom-width: 4px;
    }

    .avatar.state-4 .avatar-mouth {
      border-bottom-width: 4px;
      top: 58%;
    }

    .avatar.state-5 .avatar-mouth {
      border-bottom-width: 4px;
      top: 56%;
      transform: translateX(-50%) translateY(-1px);
    }

    .avatar.state-1 {
      filter: grayscale(0.1) brightness(0.85);
    }

    .avatar.state-2 {
      filter: none;
    }

    .avatar.state-3 {
      filter: saturate(1.1);
    }

    .avatar.state-4 {
      filter: saturate(1.25) brightness(1.05);
      box-shadow:
        0 0 26px rgba(253,191,18,1),
        0 18px 32px rgba(0,0,0,0.9);
      transform: translateY(-2px);
    }

    .avatar.state-5 {
      filter: saturate(1.3) brightness(1.1);
      box-shadow:
        0 0 30px rgba(253,191,18,1),
        0 20px 36px rgba(0,0,0,0.95);
      transform: translateY(-4px) scale(1.03);
    }

    /* PANEL DE TEXTO FLOTANTE (GLASSMORPHISM, NO CAJA DUROTA) */
    .flow-info {
      max-width: 920px;
      margin: 0 auto 26px auto;
      padding: 16px 18px;
      border-radius: 26px;
      background: radial-gradient(circle at top, rgba(0,0,0,0.75), rgba(0,0,0,0.55));
      border: 1px solid rgba(253,191,18,0.35);
      backdrop-filter: blur(14px);
      box-shadow:
        0 14px 36px rgba(0,0,0,0.9),
        0 0 22px rgba(253,191,18,0.5);
    }

    .flow-info-title {
      font-size: 19px;
      font-weight: 700;
      margin-bottom: 6px;
    }

    .flow-info-body {
      font-size: 17px;
      line-height: 1.7;
      opacity: 0.96;
      margin-bottom: 10px;
    }

    .flow-info-example-label {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      opacity: 0.86;
      margin-bottom: 4px;
    }

    .flow-info-example {
      font-size: 16px;
      line-height: 1.7;
      opacity: 0.97;
    }

    .flow-info strong {
      color: var(--dorado-soft);
    }

    /* TIMELINE INTERACTIVA */
    .timeline-section {
      margin-top: 10px;
    }

    .timeline-label {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      opacity: 0.86;
      text-align: center;
      margin-bottom: 6px;
    }

    .timeline-dots {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      max-width: 860px;
      margin: 0 auto 10px auto;
      position: relative;
    }

    .timeline-line {
      position: absolute;
      left: 5%;
      right: 5%;
      top: 50%;
      height: 2px;
      background: linear-gradient(90deg,
        rgba(253,191,18,0.0),
        rgba(253,191,18,0.7),
        rgba(253,191,18,0.0)
      );
      opacity: 0.6;
    }

    .t-dot {
      position: relative;
      z-index: 1;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      border: 2px solid rgba(253,191,18,0.9);
      background: rgba(0,0,0,0.9);
      box-shadow: 0 0 12px rgba(253,191,18,0.8);
      cursor: pointer;
      transition: 0.22s ease;
    }

    .t-dot::after {
      content: attr(data-short);
      position: absolute;
      top: 24px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      opacity: 0.8;
      white-space: nowrap;
    }

    .t-dot.active {
      background: var(--dorado);
      box-shadow:
        0 0 18px rgba(253,191,18,1),
        0 0 22px rgba(253,191,18,0.9);
      transform: translateY(-3px);
    }

    .timeline-text {
      max-width: 880px;
      margin: 18px auto 26px auto;
      padding: 12px 16px;
      border-radius: 24px;
      background: rgba(0,0,0,0.55);
      border: 1px solid rgba(253,191,18,0.4);
      backdrop-filter: blur(12px);
      font-size: 16px;
      line-height: 1.7;
      opacity: 0.97;
    }

    /* MICRO EXPERIMENTO INTEGRADOR */
    .experiment {
      max-width: 880px;
      margin: 0 auto 26px auto;
      padding: 12px 14px 14px 14px;
      border-radius: 24px;
      background: rgba(0,0,0,0.6);
      border: 1px dashed rgba(253,191,18,0.7);
      backdrop-filter: blur(10px);
    }

    .experiment-label {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      opacity: 0.85;
      margin-bottom: 6px;
    }

    .experiment-options {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 4px;
      margin-bottom: 6px;
    }

    .exp-pill {
      padding: 5px 11px;
      border-radius: 999px;
      border: 1px solid rgba(253,191,18,0.7);
      font-size: 13px;
      cursor: pointer;
      background: rgba(8,16,32,0.9);
      opacity: 0.86;
      transition: 0.22s ease;
    }

    .exp-pill:hover {
      opacity: 1;
      box-shadow: 0 0 14px rgba(253,191,18,0.9);
    }

    .exp-pill.active {
      background: var(--dorado);
      color: #000C1A;
      opacity: 1;
      box-shadow: 0 0 18px rgba(253,191,18,1);
    }

    .experiment-result {
      font-size: 14px;
      margin-top: 4px;
      opacity: 0.96;
    }

    /* MENSAJE FINAL */
    .closing-text {
      max-width: 820px;
      margin: 18px auto 0 auto;
      font-size: 17px;
      line-height: 1.7;
      text-align: center;
      opacity: 0.95;
    }

    .closing-text strong {
      color: var(--dorado-soft);
    }

    /* NAV INFERIOR */
    .nav-buttons {
      margin-top: 38px;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 12px;
    }

    .btn {
      padding: 12px 22px;
      font-size: 16px;
      border-radius: 999px;
      border: 2px solid var(--dorado);
      background: var(--dorado);
      color: #000C1A;
      cursor: pointer;
      transition: 0.28s ease;
      font-weight: 700;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .btn.secondary {
      background: transparent;
      color: var(--blanco);
      border-color: rgba(253,191,18,0.75);
    }

    .btn:hover {
      box-shadow: 0 0 20px rgba(253,191,18,0.95);
      transform: translateY(-2px);
    }

    .btn span.arrow {
      font-size: 17px;
      line-height: 1;
    }

    @media (max-width: 720px) {
      .flow-map {
        height: 260px;
      }
      .flow-node.f1,
      .flow-node.f2,
      .flow-node.f3,
      .flow-node.f4 {
        position: static;
        transform: none;
        margin: 6px auto;
        display: block;
        text-align: left;
      }
      .flow-curve {
        display: none;
      }
      .flow-map {
        display: flex;
        flex-direction: column;
        align-items: stretch;
      }
      .timeline-dots {
        flex-wrap: wrap;
        justify-content: center;
      }
      .timeline-line {
        display: none;
      }
      .t-dot::after {
        position: static;
        display: block;
        transform: none;
        margin-top: 4px;
      }
    }
  </style>
</head>
<body>

  <div class="particles"></div>
  <div class="hex h1"></div>
  <div class="hex h2"></div>

  <div class="top-nav">
    <a href="index.html">
      <span class="icon">⟵</span>
      Volver al menú del módulo
    </a>
  </div>

  <div class="container">

    <div class="tag">
      <div class="tag-dot"></div>
      PANTALLA 7 · INTEGRACIÓN
    </div>

    <h1>Contextualismo, Análisis Funcional, RFT y ACT</h1>

    <div class="sub">
      Cómo se articulan filosofía, lenguaje y clínica para comprender y transformar la conducta.
    </div>

    <p class="descripcion">
      Esta pantalla reúne los hilos centrales del módulo: el <strong>contextualismo funcional</strong>
      define el propósito y el criterio de verdad; el <strong>análisis funcional</strong> organiza la conducta;
      la <strong>RFT</strong> explica cómo el lenguaje transforma funciones; y <strong>ACT</strong> aplica estos principios
      para cambiar la forma en que las personas actúan en su vida, sin pelear con el contenido del pensamiento.
    </p>

    <div class="layers-bar">
      <div class="layer-chip">
        <div class="layer-dot"></div> Filosofía de la ciencia
      </div>
      <div class="layer-chip">
        <div class="layer-dot"></div> Análisis funcional
      </div>
      <div class="layer-chip">
        <div class="layer-dot"></div> Procesos del lenguaje (RFT)
      </div>
      <div class="layer-chip">
        <div class="layer-dot"></div> Aplicación clínica (ACT)
      </div>
    </div>

    <!-- SECCIÓN FLUJO INTERACTIVO -->
    <section class="flow-section">
      <div class="flow-label">Toca cada punto del flujo para ver su aporte</div>

      <div class="flow-map">
        <div class="flow-curve"></div>

        <div
          class="flow-node f1"
          data-title="Contextualismo funcional: ¿qué cuenta como ‘verdadero’?"
          data-body="El contextualismo funcional define la verdad como lo que <strong>funciona</strong> para predecir e influenciar la conducta con precisión, alcance y profundidad. Un modelo es útil si nos permite intervenir de manera efectiva, no si describe fielmente una ‘realidad interna’."
          data-example="Mensaje: «Necesitamos hablar». En una historia de crítica, la frase adquiere función de amenaza y conduce a evitación. En un contexto de apoyo, puede funcionar como oportunidad de cuidado. El evento a analizar es la <strong>interacción mensaje–persona–historia–situación</strong>, no solo el texto."
          data-avatar-state="1"
        >
          <div class="flow-node-label">Filosofía</div>
          <div class="flow-node-title">Contextualismo funcional</div>
        </div>

        <div
          class="flow-node f2"
          data-title="Análisis funcional: organizar la conducta-en-contexto"
          data-body="El análisis funcional traduce la filosofía en una forma concreta de trabajo: identificar <strong>antecedentes</strong>, <strong>respuestas</strong> (públicas y privadas) y <strong>consecuencias</strong>, siempre en relación con la historia de aprendizaje. Pensar, sentir e imaginar son distintas formas de conducta bajo control contextual."
          data-example="Caso: Ana recibe la invitación a una reunión. Antecedente: notificación en el teléfono. Respuestas privadas: «voy a molestar», nudo en la garganta. Conducta: evita asistir. Consecuencia inmediata: alivio. El análisis funcional organiza estos elementos para intervenir sobre las <strong>funciones</strong>, no sobre ‘etiquetas internas’."
          data-avatar-state="2"
        >
          <div class="flow-node-label">Organización</div>
          <div class="flow-node-title">Análisis funcional</div>
        </div>

        <div
          class="flow-node f3"
          data-title="RFT: cómo el lenguaje transforma funciones"
          data-body="La Teoría del Marco Relacional explica cómo el lenguaje humano permite que estímulos distintos compartan funciones mediante relaciones arbitrariamente aplicables. Un pensamiento, una imagen o una palabra pueden cambiar lo que un evento hace en la conducta, aunque nada cambie físicamente en el ambiente."
          data-example="Micrófono + historia de fracaso → el micrófono adquiere función de amenaza. Más tarde, solo imaginar ‘presentar’ puede generar la misma respuesta corporal. A través de marcos de coordinación, comparación y jerarquía, la red verbal <strong>transforma las funciones</strong> sin nuevo contacto directo con el estímulo original."
          data-avatar-state="3"
        >
          <div class="flow-node-label">Procesos</div>
          <div class="flow-node-title">RFT y redes relacionales</div>
        </div>

        <div
          class="flow-node f4"
          data-title="ACT: cambiar funciones al servicio de los valores"
          data-body="ACT utiliza el contextualismo y la RFT para diseñar contextos donde las funciones de los eventos privados cambian. En lugar de discutir si un pensamiento es ‘verdadero’, se trabaja para que pierda poder evitativo y pueda coexistir con acciones guiadas por <strong>valores</strong> personales."
          data-example="Ana puede notar «voy a molestar» como pensamiento, contactar la ansiedad en el cuerpo y, al mismo tiempo, acercarse a su valor de colaboración asistiendo brevemente a la reunión. El contexto terapéutico entrena nuevas respuestas bajo las mismas señales, modificando la función del lenguaje en su vida diaria."
          data-avatar-state="4"
        >
          <div class="flow-node-label">Aplicación</div>
          <div class="flow-node-title">ACT en la clínica</div>
        </div>
      </div>

      <div class="avatar-wrapper">
        <div class="avatar state-1" id="avatar">
          <div class="avatar-face">
            <div class="avatar-mouth"></div>
          </div>
        </div>
      </div>

      <div class="flow-info">
        <div class="flow-info-title" id="flow-title">
          Contextualismo funcional: ¿qué cuenta como ‘verdadero’?
        </div>
        <div class="flow-info-body" id="flow-body">
          El contextualismo funcional define la verdad como lo que <strong>funciona</strong> para predecir e influenciar
          la conducta con precisión, alcance y profundidad. Un modelo es útil si nos permite intervenir de manera
          efectiva, no si describe fielmente una ‘realidad interna’.
        </div>
        <div class="flow-info-example-label">Ejemplo clínico</div>
        <div class="flow-info-example" id="flow-example">
          Mensaje: «Necesitamos hablar». En una historia de crítica, la frase adquiere función de amenaza y conduce
          a evitación. En un contexto de apoyo, puede funcionar como oportunidad de cuidado. El evento a analizar es
          la <strong>interacción mensaje–persona–historia–situación</strong>, no solo el texto.
        </div>
      </div>
    </section>

    <!-- TIMELINE: DE EVENTO A ACCIÓN VALIOSA -->
    <section class="timeline-section">
      <div class="timeline-label">Del evento a la acción valiosa · Paso a paso</div>

      <div class="timeline-dots">
        <div class="timeline-line"></div>

        <div
          class="t-dot"
          data-step="1"
          data-short="Señal"
          data-text="1. Señal: aparece un acontecimiento en la vida de la persona (por ejemplo, la invitación a una reunión o el mensaje «Necesitamos hablar»). Desde el contextualismo, no se analiza el estímulo aislado, sino su lugar dentro de la historia y del contexto actual."
        ></div>

        <div
          class="t-dot"
          data-step="2"
          data-short="Respuesta privada"
          data-text="2. Respuesta privada: surgen pensamientos, imágenes o sensaciones corporales (por ejemplo, «voy a molestar», nudo en el estómago). La RFT ayuda a entender cómo estas respuestas se construyen relacionalmente y adquieren funciones específicas."
        ></div>

        <div
          class="t-dot"
          data-step="3"
          data-short="Función"
          data-text="3. Función: lo relevante es qué hace todo esto en la conducta. Si la combinación señal–lenguaje–sensaciones conduce a evitación y alivio inmediato, la función es evitativa y se refuerza por reducción de malestar."
        ></div>

        <div
          class="t-dot"
          data-step="4"
          data-short="Transformación"
          data-text="4. Transformación relacional: a través de marcos de coordinación, comparación o jerarquía, nuevos estímulos (palabras, recuerdos, lugares) heredan funciones aversivas sin contacto directo. El problema se expande en la red verbal."
        ></div>

        <div
          class="t-dot"
          data-step="5"
          data-short="Acción valiosa"
          data-text="5. Acción valiosa: ACT propone crear contextos donde la persona pueda notar sus eventos privados, tomar perspectiva y elegir conductas coherentes con sus valores, aun en presencia de ansiedad. El cambio clínico se observa en lo que hace, no solo en lo que siente o piensa."
        ></div>
      </div>

      <div class="timeline-text" id="timeline-text">
        1. Señal: aparece un acontecimiento en la vida de la persona (por ejemplo, la invitación a una reunión
        o el mensaje «Necesitamos hablar»). Desde el contextualismo, no se analiza el estímulo aislado, sino su lugar
        dentro de la historia y del contexto actual.
      </div>
    </section>

    <!-- MICRO EXPERIMENTO INTEGRADOR -->
    <section class="experiment">
      <div class="experiment-label">Micro-experimento: ¿dónde pones el foco al intervenir?</div>
      <div class="experiment-options">
        <button class="exp-pill active" data-exp="contenido">
          En el contenido del pensamiento
        </button>
        <button class="exp-pill" data-exp="funcion">
          En la función del pensamiento
        </button>
        <button class="exp-pill" data-exp="contexto">
          En el contexto y los valores
        </button>
      </div>
      <div class="experiment-result" id="experiment-result">
        Si centramos la intervención solo en el contenido, podemos quedarnos atrapados discutiendo si el pensamiento
        es ‘cierto’ o ‘equivocado’, sin modificar realmente los patrones de evitación o acercamiento que la persona
        despliega en su vida cotidiana.
      </div>
    </section>

    <!-- MENSAJE FINAL DE INTEGRACIÓN -->
    <p class="closing-text">
      En una perspectiva <strong>contextualista</strong>, coherente con la <strong>RFT</strong> y <strong>ACT</strong>, no intentamos
      eliminar pensamientos ni emociones, sino cambiar la forma en que funcionan en la vida de la persona. Filosofía,
      análisis funcional, procesos relacionales y valores se integran cuando el foco está en <strong>transformar la función
      de los eventos privados al servicio de una vida más amplia y significativa</strong>.
    </p>

    <!-- NAV INFERIOR -->
    <div class="nav-buttons">
      <a href="p6.html" class="btn secondary">
        <span class="arrow">⟵</span>
        Volver a P6 · Contextualismo en la clínica
      </a>
      <a href="p8.html" class="btn">
        P8 · Cierre y puente al siguiente módulo
        <span class="arrow">⟶</span>
      </a>
    </div>

  </div>

  <script>
    // ---- Flujo interactivo (nodos) ----
    const flowNodes = document.querySelectorAll(".flow-node");
    const flowTitle = document.getElementById("flow-title");
    const flowBody = document.getElementById("flow-body");
    const flowExample = document.getElementById("flow-example");
    const avatar = document.getElementById("avatar");

    function setActiveFlowNode(node) {
      flowNodes.forEach(n => n.classList.remove("active"));
      node.classList.add("active");

      const title = node.getAttribute("data-title");
      const body = node.getAttribute("data-body");
      const example = node.getAttribute("data-example");
      const avatarState = node.getAttribute("data-avatar-state");

      flowTitle.innerHTML = title;
      flowBody.innerHTML = body;
      flowExample.innerHTML = example;

      avatar.classList.remove("state-1", "state-2", "state-3", "state-4", "state-5");
      if (avatarState) {
        avatar.classList.add("state-" + avatarState);
      }
    }

    flowNodes.forEach(node => {
      node.addEventListener("click", () => setActiveFlowNode(node));
    });

    // Estado inicial: primer nodo activo
    if (flowNodes.length > 0) {
      setActiveFlowNode(flowNodes[0]);
    }

    // Si el usuario ha pasado por todos los nodos, puedes usar esto para activar un estado 5 más adelante
    // (por ahora no lo forzamos automáticamente, para mantenerlo simple).

    // ---- Timeline interactiva ----
    const tDots = document.querySelectorAll(".t-dot");
    const tText = document.getElementById("timeline-text");

    function setActiveStep(dot) {
      tDots.forEach(d => d.classList.remove("active"));
      dot.classList.add("active");
      const text = dot.getAttribute("data-text");
      if (text) {
        tText.innerHTML = text;
      }
    }

    tDots.forEach(dot => {
      dot.addEventListener("click", () => setActiveStep(dot));
    });

    if (tDots.length > 0) {
      setActiveStep(tDots[0]);
    }

    // ---- Micro-experimento ----
    const expPills = document.querySelectorAll(".exp-pill");
    const expResult = document.getElementById("experiment-result");

    function setExperiment(mode) {
      expPills.forEach(p => p.classList.remove("active"));
      const activePill = Array.from(expPills).find(p => p.getAttribute("data-exp") === mode);
      if (activePill) activePill.classList.add("active");

      if (mode === "contenido") {
        expResult.innerHTML =
          "Si centramos la intervención solo en el contenido, podemos quedarnos atrapados discutiendo si el pensamiento es ‘cierto’ o ‘equivocado’, sin modificar realmente los patrones de evitación o acercamiento que la persona despliega en su vida cotidiana.";
      } else if (mode === "funcion") {
        expResult.innerHTML =
          "Al poner el foco en la <strong>función</strong> del pensamiento, preguntamos: ¿qué hace este evento verbal en la conducta aquí y ahora? Esto abre la puerta a intervenir sobre las relaciones y contingencias que mantienen el problema, más que sobre el relato en sí.";
      } else if (mode === "contexto") {
        expResult.innerHTML =
          "Cuando intervenimos sobre el <strong>contexto</strong> y los <strong>valores</strong>, usamos ACT y RFT para diseñar situaciones donde los mismos pensamientos pueden coexistir con acciones valiosas. Es el nivel en el que la integración filosofía–análisis funcional–lenguaje–clínica se vuelve más visible.";
        // Ocasión para mostrar un estado de mayor integración en el avatar
        avatar.classList.remove("state-1", "state-2", "state-3", "state-4");
        avatar.classList.add("state-5");
      }
    }

    expPills.forEach(pill => {
      pill.addEventListener("click", () => {
        setExperiment(pill.getAttribute("data-exp"));
      });
    });

    // Estado inicial del experimento
    setExperiment("contenido");
  </script>

</body>
</html>
